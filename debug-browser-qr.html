<!DOCTYPE html>
<html>
<head>
    <title>QR Code Debug Test</title>
    <script src="https://unpkg.com/qrcode@1.5.4/build/qrcode.min.js"></script>
</head>
<body>
    <h1>QR Code Debug Test</h1>
    <button id="generateBtn">Generate QR Code</button>
    <div id="result"></div>
    <div id="qrcode"></div>

    <script>
        document.getElementById('generateBtn').addEventListener('click', async () => {
            try {
                const testData = {
                    type: 'sales',
                    receiptNumber: 'TEST-001',
                    date: new Date().toISOString(),
                    items: [
                        { name: 'Product 1', quantity: 2, price: 10.00, total: 20.00 },
                        { name: 'Product 2', quantity: 1, price: 15.00, total: 15.00 }
                    ],
                    subtotal: 35.00,
                    tax: 0.00,
                    discount: 0.00,
                    total: 35.00,
                    amountReceived: 40.00,
                    change: 5.00
                };

                const testDataString = JSON.stringify(testData);
                console.log('Test data:', testDataString);

                // Try generating QR code
                const qrCodeDataUrl = await QRCode.toDataURL(testDataString, { 
                    width: 120,
                    margin: 2,
                    errorCorrectionLevel: 'M',
                    type: 'image/png',
                    quality: 1,
                    color: {
                        dark: '#000000',
                        light: '#ffffff'
                    }
                });

                console.log('QR Code generated successfully');
                console.log('Data URL length:', qrCodeDataUrl.length);
                console.log('Data URL preview:', qrCodeDataUrl.substring(0, 100));

                // Display the QR code
                document.getElementById('result').innerHTML = `
                    <p>QR Code generated successfully!</p>
                    <p>Data URL length: ${qrCodeDataUrl.length}</p>
                    <img src="${qrCodeDataUrl}" alt="QR Code" style="max-width: 200px;" />
                    <p>Receipt #: TEST-001</p>
                `;
            } catch (error) {
                console.error('Error generating QR code:', error);
                document.getElementById('result').innerHTML = `
                    <p>Error generating QR code:</p>
                    <pre>${error.message}</pre>
                `;
            }
        });
    </script>
</body>
</html><!DOCTYPE html>
<html>
<head>
    <title>QR Code Debug Test</title>
    <script src="https://unpkg.com/qrcode@1.5.4/build/qrcode.min.js"></script>
</head>
<body>
    <h1>QR Code Debug Test</h1>
    <button id="generateBtn">Generate QR Code</button>
    <div id="result"></div>
    <div id="qrcode"></div>

    <script>
        document.getElementById('generateBtn').addEventListener('click', async () => {
            try {
                const testData = {
                    type: 'sales',
                    receiptNumber: 'TEST-001',
                    date: new Date().toISOString(),
                    items: [
                        { name: 'Product 1', quantity: 2, price: 10.00, total: 20.00 },
                        { name: 'Product 2', quantity: 1, price: 15.00, total: 15.00 }
                    ],
                    subtotal: 35.00,
                    tax: 0.00,
                    discount: 0.00,
                    total: 35.00,
                    amountReceived: 40.00,
                    change: 5.00
                };

                const testDataString = JSON.stringify(testData);
                console.log('Test data:', testDataString);

                // Try generating QR code
                const qrCodeDataUrl = await QRCode.toDataURL(testDataString, { 
                    width: 120,
                    margin: 2,
                    errorCorrectionLevel: 'M',
                    type: 'image/png',
                    quality: 1,
                    color: {
                        dark: '#000000',
                        light: '#ffffff'
                    }
                });

                console.log('QR Code generated successfully');
                console.log('Data URL length:', qrCodeDataUrl.length);
                console.log('Data URL preview:', qrCodeDataUrl.substring(0, 100));

                // Display the QR code
                document.getElementById('result').innerHTML = `
                    <p>QR Code generated successfully!</p>
                    <p>Data URL length: ${qrCodeDataUrl.length}</p>
                    <img src="${qrCodeDataUrl}" alt="QR Code" style="max-width: 200px;" />
                    <p>Receipt #: TEST-001</p>
                `;
            } catch (error) {
                console.error('Error generating QR code:', error);
                document.getElementById('result').innerHTML = `
                    <p>Error generating QR code:</p>
                    <pre>${error.message}</pre>
                `;
            }
        });
    </script>
</body>
</html>